# Создание документа "ИТ-Ландшафт" из транскрипции (v2.1)

Универсальный промпт для анализа транскрипций и создания структурированной документации по ИТ-инфраструктуре.

---

## Параметры выполнения

```yaml
режим: автономный              # без запроса подтверждений между этапами
выходной_файл: ит-ландшафт.md  # в папке с транскрипцией
формат: markdown               # таблицы, ASCII-схемы
неясности: Приложение Б        # НЕ в разделах, только в приложении
пустые_разделы: не_создавать   # если нет данных — раздел не включать
таймкоды: да                   # указывать источник [мм:сс] в таблицах
```

---

## Контекст встречи (заполнить перед анализом)

```yaml
тип_встречи: [аудит ИТ / техническое совещание / интервью / planning / ретро]
участники: [кто присутствовал, роли]
тема: [основная тема встречи]
проект: [название проекта, если есть]
предыстория: [что важно знать для контекста]
```

**Пример:**
```yaml
тип_встречи: аудит ИТ-инфраструктуры
участники: команда DevOps заказчика, аудиторы Company
тема: Kubernetes, CI/CD, безопасность
проект: Company — аудит ИТ-ландшафта
предыстория: серия встреч, это 3-я по счёту, фокус на контейнеризации
```

---

## Режимы работы

### Режим 1: Быстрый (резюме)

```markdown
Проанализируй транскрипцию и подготовь краткое резюме:

1. **Суть встречи** (2-3 предложения)
2. **Ключевые темы** (список)
3. **Принятые решения**
4. **Задачи и ответственные**
5. **Открытые вопросы**

Формат: компактный, без воды.
```

### Режим 2: Стандартный (ИТ-Ландшафт)

Полный анализ с созданием структурированного документа. **Описан ниже.**

### Режим 3: Глубокий (с аналитикой)

Стандартный режим + дополнительные приложения:
- Е. Принятые решения (с аргументацией)
- Ж. Разногласия и дискуссии
- З. Риски и проблемы
- И. Даты и дедлайны

---

## Основная задача (Режим 2: Стандартный)

Проанализируй транскрипцию и создай структурированный документ "ИТ-Ландшафт":

1. Извлечь все сущности (организации, люди, системы, метрики)
2. Структурировать по разделам (адаптировать под контент)
3. Добавить ASCII-схемы где применимо
4. Вынести все неясности в Приложение Б
5. Сформировать глоссарий терминов

---

## Приоритет информации

| Приоритет | Тип | Как обрабатывать |
|-----------|-----|------------------|
| 1 | Прямые утверждения | "у нас 1000 микросервисов" → факт |
| 2 | Подтверждённые факты | "да, правильно" → факт |
| 3 | Косвенные упоминания | Пометка "вероятно" или "предположительно" |
| 4 | Неясные/противоречивые | Выносить в Приложение Б |

---

## Нормализация терминов

При обнаружении разных написаний одного термина:
- Выбрать каноническое написание
- Использовать его во всём документе
- Добавить варианты в глоссарий

**Примеры:**
| Варианты | Каноническое |
|----------|--------------|
| "Кувер", "Кубер", "K8s" | **Kubernetes** |
| "CI/CD", "CICD", "пайплайн" | **CI/CD** |
| "секреты", "credentials", "пароли" | **секреты** |

---

## Структура документа

### Обязательные разделы

| № | Раздел | Всегда включать |
|---|--------|-----------------|
| 1 | Общие сведения о компании | Да |
| 2 | Организационная структура ИТ | Да |
| N | Сводная таблица технологического стека | Да (последний) |

### Условные разделы (включать при наличии информации)

| Раздел | Включать если упоминается |
|--------|---------------------------|
| Облачная инфраструктура | Облачные провайдеры, IaaS |
| Контейнерная платформа (Kubernetes) | K8s, контейнеры, поды |
| Сетевая инфраструктура | CNI, сети, VLAN, firewall |
| Service Mesh | Linkerd, Istio, Envoy |
| CI/CD платформа | GitLab, Jenkins, пайплайны |
| Управление секретами | Vault, SOPS, Lockbox |
| Управление доступом | SSO, RBAC, IdP |
| Информационная безопасность | SIEM, WAF, сканеры |
| Серверная инфраструктура | Bare metal, виртуализация |
| Служба каталогов (AD) | Active Directory, LDAP |
| Системы хранения данных | СХД, S3, NFS |
| VDI и удалённый доступ | Виртуальные рабочие столы, VPN |
| Архитектура приложения | Микросервисы, монолит |
| Релизный процесс | Деплой, релизы, среды |
| Мониторинг и observability | Prometheus, Grafana, логи |
| Миграции и технический долг | Переходы, legacy |

---

## Формат разделов

```markdown
## N. Название раздела

### N.1. Общее описание
[1-3 предложения о сути раздела]

### N.2. Ключевые параметры
| Параметр | Значение | Источник |
|----------|----------|----------|

### N.3. Детализация
[Подразделы с таблицами]

### N.4. Схема (если применимо)
[ASCII-диаграмма]
```

### Пример заполнения таблицы

| Название | Категория | Назначение | Источник |
|----------|-----------|------------|----------|
| GitLab | CI/CD | Репозитории, пайплайны | [15:23] |
| Calico | CNI | Сетевые политики K8s | [27:16] |

---

## Визуализация (ASCII-схемы)

Создавать схемы для:

| Тема | Когда создавать |
|------|-----------------|
| Архитектура системы | Если описаны компоненты и их связи |
| Облачная инфраструктура | Если несколько облаков/зон |
| Сетевая топология | Если описаны сети, сегменты |
| CI/CD pipeline | Если описан процесс сборки/деплоя |
| Релизный процесс | Если описаны этапы и среды |
| Организационная структура | Если описаны команды и роли |
| Модель доступа | Если описаны типы пользователей |

### Пример ASCII-схемы

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│     DEV     │────►│    STAGE    │────►│    PROD     │
└─────────────┘     └─────────────┘     └─────────────┘
```

---

## Приложения

### Обязательные приложения (Режим 2)

#### Приложение А. Контакты ключевых специалистов

| ФИО | Роль | Зона ответственности | Источник |
|-----|------|----------------------|----------|

#### Приложение Б. Открытые вопросы и неясности

**Группировка по категориям:**

##### Б.1. Организационные вопросы
| № | Вопрос | Контекст | Таймкод |
|---|--------|----------|---------|

##### Б.2. Технические вопросы
| № | Вопрос | Контекст | Таймкод |
|---|--------|----------|---------|

##### Б.3. Вопросы безопасности
| № | Вопрос | Контекст | Таймкод |
|---|--------|----------|---------|

#### Приложение В. Запланированные активности

| Активность | Участники | Срок | Статус | Источник |
|------------|-----------|------|--------|----------|

#### Приложение Г. Глоссарий и сокращения

| Термин | Расшифровка | Варианты написания |
|--------|-------------|-------------------|

#### Приложение Д. Источники информации

| Файл | Дата | Участники | Основные темы |
|------|------|-----------|---------------|

---

### Дополнительные приложения (Режим 3: Глубокий)

#### Приложение Е. Принятые решения

| № | Решение | Контекст/аргументы | Кто принял | Риски/оговорки | Таймкод |
|---|---------|-------------------|------------|----------------|---------|

**Также фиксировать:** Вопросы, по которым решение НЕ было принято.

#### Приложение Ж. Разногласия и дискуссии

| № | Тема разногласия | Позиция 1 | Позиция 2 | Как разрешено | Таймкод |
|---|------------------|-----------|-----------|---------------|---------|

**Также отмечать:** Темы с напряжением или неуверенностью участников.

#### Приложение З. Риски и проблемы

| № | Тип | Описание | Влияние | Статус | Таймкод |
|---|-----|----------|---------|--------|---------|

**Типы:**
- Явно названная проблема
- Потенциальный риск (между строк)
- Блокер/зависимость
- Ресурсное ограничение

#### Приложение И. Даты и дедлайны

| Дата/срок | Что | Контекст | Таймкод |
|-----------|-----|----------|---------|

---

## Работа с несколькими файлами

### Схема накопления

```
Файл 1 → Полный анализ → Черновик v1
                              ↓
Файл 2 → Дельта-анализ → Черновик v2 (дополнен)
                              ↓
Файл N → Дельта-анализ → Черновик vN
                              ↓
                      Финальный документ
```

### Промпт для дополнения (второй и последующие файлы)

```markdown
## Контекст
Черновик документа "ИТ-Ландшафт" прикреплён ниже.
Новая транскрипция: [имя файла]

## Задача
Проанализируй новую транскрипцию и определи:

### 1. Дополнения к существующим разделам
| Раздел | Что добавить | Таймкод |
|--------|--------------|---------|

### 2. Противоречия с текущей версией
| Раздел | Было | Стало | Как разрешить |
|--------|------|-------|---------------|

### 3. Новые разделы (если нужны)
| Раздел | Обоснование | Куда вставить |
|--------|-------------|---------------|

### 4. Новые сущности
| Тип | Название | Есть в документе? |
|-----|----------|-------------------|

### 5. Новые вопросы для Приложения Б
| Вопрос | Контекст | Таймкод |
|--------|----------|---------|

## После анализа
Обнови документ и покажи изменения в формате diff:
```diff
- Старый текст
+ Новый текст
```
```

---

## Работа с длинными транскрипциями

Если транскрипция очень длинная (>100k токенов):

1. **Разбей по таймкодам:**
   ```
   Часть 1: 00:00 - 30:00 (тема А)
   Часть 2: 30:00 - 60:00 (тема Б)
   ```

2. **Анализируй по частям:**
   ```
   Вот часть 1 транскрипции [00:00-30:00].
   Извлеки сущности и ключевые факты.
   ```

3. **Собери в единый документ:**
   ```
   Вот извлечённые данные из всех частей.
   Создай финальный документ.
   ```

---

## Уточняющие вопросы (follow-up)

После первичного анализа используй уточняющие вопросы:

| Цель | Примеры вопросов |
|------|------------------|
| Детализация | "Расскажи подробнее о решении по Kubernetes" |
| Аргументация | "Какие аргументы приводились за и против Cilium?" |
| Атрибуция | "Кто именно предложил переход на Lockbox?" |
| Связи | "Как связаны GitLab и Nexus в контексте авторизации?" |
| Противоречия | "В начале сказали X, а потом Y — как это согласуется?" |
| Неясности | "Что имелось в виду под 'траст с Yandex'?" |

---

## Советы по работе

### Итеративный подход

```
1. Начни с общего резюме (Режим 1)
2. Углубись в детали (Режим 2)
3. Добавь аналитику если нужно (Режим 3)
```

### Указывай контекст

Чем больше контекста — тем лучше анализ:
```
Это 3-я встреча по аудиту ИТ-инфраструктуры.
Ранее обсуждали: сети, AD, виртуализацию.
Сегодня фокус: Kubernetes и CI/CD.
Участники: DevOps-команда заказчика (4 человека) + 2 аудитора.
```

### Формат вывода

Всегда указывай желаемый формат:
- Таблица
- Список
- Markdown
- ASCII-схема
- Diff

---

## Чеклист финализации

Перед завершением проверить:

- [ ] Все разделы с информацией заполнены
- [ ] Пустые разделы удалены
- [ ] Таблицы содержат столбец "Источник" (таймкоды)
- [ ] ASCII-схемы добавлены где применимо
- [ ] Неясности вынесены в Приложение Б (не в разделах)
- [ ] Глоссарий заполнен
- [ ] Нет противоречий между разделами
- [ ] Термины нормализованы
- [ ] Решения зафиксированы (Режим 3)
- [ ] Риски выявлены (Режим 3)

---

## Антипаттерны (как НЕ надо)

| ❌ Неправильно | ✅ Правильно |
|----------------|--------------|
| Запрашивать подтверждение после каждого раздела | Выполнить всё автономно |
| Писать неясности в каждый раздел | Собрать в Приложение Б |
| Создавать пустые разделы | Включать только разделы с данными |
| Игнорировать таймкоды | Указывать источник [мм:сс] |
| Загружать все файлы сразу | Обрабатывать по одному с накоплением |
| Угадывать неизвестное | Выносить в открытые вопросы |
| Игнорировать контекст | Запросить контекст перед анализом |
| Пропускать разногласия | Фиксировать в Приложении Ж |

---

## Быстрый старт

### Один файл — быстрое резюме
```
Вот транскрипция встречи.
Режим: быстрый (резюме).
Дай краткий анализ.
```

### Один файл — полный анализ
```
Вот транскрипция встречи.
Контекст: аудит ИТ-инфраструктуры, команда DevOps, тема — Kubernetes.
Режим: стандартный.
Создай документ "ИТ-Ландшафт".
Сохрани в файл ит-ландшафт.md.
```

### Один файл — глубокий анализ
```
Вот транскрипция встречи.
Контекст: [заполнить]
Режим: глубокий (с аналитикой решений и рисков).
Создай документ с приложениями Е, Ж, З, И.
```

### Несколько файлов
```
Сессия 1: Вот первая транскрипция. Создай черновик v1.
Сессия 2: Вот черновик v1 и новая транскрипция. Дополни → v2.
Сессия N: ...
Финал: Собери итоговый документ.
```

---

## Пример результата

```
ит-ландшафт.md
├── 1. Общие сведения о компании
├── 2. Организационная структура ИТ
├── 3. Облачная инфраструктура
├── 4. Контейнерная платформа (Kubernetes)
├── ...
├── N. Сводная таблица технологического стека
└── Приложения
    ├── А. Контакты
    ├── Б. Открытые вопросы
    ├── В. Запланированные активности
    ├── Г. Глоссарий
    ├── Д. Источники
    ├── Е. Принятые решения (Режим 3)
    ├── Ж. Разногласия (Режим 3)
    ├── З. Риски и проблемы (Режим 3)
    └── И. Даты и дедлайны (Режим 3)
```

---

## История версий

| Версия | Дата | Изменения |
|--------|------|-----------|
| v1.0 | — | Исходный промпт с 5 протоколами |
| v2.0 | — | Автономный режим, адаптивная структура, таймкоды |
| v2.1 | — | Режимы работы, дополнительные приложения (Е-И), контекст, советы |
